class PromptTemplateManager:
    """프롬프트 템플릿을 중앙에서 관리하는 클래스"""
    
    @staticmethod
    def get_video_summary_prompt() -> str:
        """유튜브 영상 요약용 프롬프트 템플릿"""
        return """
당신은 유튜브 영상 자막을 분석해 구간별 개요를 작성하는 AI입니다.
자막은 실제 영상의 전체 내용을 포함하고 있으며, 당신의 목표는 이 자막을 기반으로 10초 단위로 영상의 흐름을 정리하는 것입니다.
- 각 소제목은 영상의 주제를 대표해야 합니다.
- 각 구간은 영상 흐름을 반영하여 약 10초 단위(±5초 허용)로 구분해야 합니다.
- 출력은 반드시 위의 예시 형식을 따르며, 불필요한 부가 설명 없이 개요만 출력해야 합니다.
- 각 구간의 제목과 시간 범위를 표시하세요.
- 각 구간 설명은 3인칭 시점으로, 객관적으로 간결하게 서술하세요.
- 1인칭 표현(예: "나는", "내가") 대신 "화자", "그/그녀", "인터뷰어" 등의 표현을 사용하세요.
- 각 구간별 핵심 내용은 최대 3문장 이내로 요약하세요.
- 전체 개요를 I, II, III 등으로 번호 매겨 구성하세요.
- 불필요한 로그나 시스템 메시지를 출력하지 마세요

다음과 같은 형식으로 결과를 반드시 출력해야 합니다:

다음은 제공된 영상 스크립트를 기반으로 한 유튜브 영상 개요의 번역입니다:
요구 사항:


I. 도입 (0:00 - 0:25)
화자가 자신을 대학생이라고 소개한다.  
본인의 채널 및 콘텐츠에 대해 간단히 설명한다.

II. 글쓰기와 재능 (0:25 - 0:59)  
화자는 글쓰기를 좋아한다고 말한다.  
인터뷰어는 화자에게 리더십 같은 다른 재능도 있다고 언급한다.  
화자는 자신의 리더십 능력을 과소평가한다.

...

질문: {input}
문서 내용: {context}
답변:""".strip()
    
    @staticmethod
    def get_comment_reaction_prompt() -> str:
        """댓글 반응 분석용 프롬프트 템플릿"""
        return """
당신은 유튜브 댓글을 분석하는 AI입니다.
댓글의 감정, 주요 키워드, 시청자 반응을 분석해주세요.

질문: {input}
문서 내용: {context}
답변:""".strip()
    
    @staticmethod
    def get_video_evaluation_prompt() -> str:
        """비디오 평가용 프롬프트 템플릿"""
        return """
당신은 유튜브 비디오를 분석하는 AI입니다.
비디오의 특성, 콘텐츠 트렌드, 성장 요인을 분석해주세요.

질문: {input}
문서 내용: {context}
답변:""".strip()
    



    @staticmethod
    def get_meaning_based_chunk_prompt() -> str:
        """
        의미 기반 청킹 설명 생성용 프롬프트 템플릿 반환
        """
        return (
            "아래는 유튜브 영상에서 시청자 이탈이 가장 심한 구간에 해당하는 의미 기반 청킹 데이터입니다.\n"
            "각 항목은 [대사 내용, 대사 시작 시간(초), 대사 종료 시간(초)] 형식의 리스트로 제공됩니다.\n"
            "의미 기반 청킹은 집중 이탈 구간을 중심으로 문맥과 의미 단위에 따라 텍스트를 나눈 것입니다.\n\n"
            "각 입력 청킹에 대해 다음 세 가지 분석 목적에 맞춰, 앞뒤 맥락을 참고하여 설명을 생성해 주세요:\n"
            "1) 이탈 원인 분석에 활용할 설명\n"
            "2) 개선 방안 제안에 활용할 설명\n"
            "3) 예상 편집 흐름 제시에 활용할 설명\n\n"
            "출력은 입력 리스트와 동일한 순서와 개수를 유지하며, 각 항목에 대해 "
            "[설명 텍스트, 대사 시작 시간(초), 대사 종료 시간(초)] 형태의 리스트로 1:1 대응해야 합니다.\n"
            "각 설명은 1~3문장(약 30~100단어)으로 핵심 내용을 간결하고 명확하게 요약해 주세요.\n\n"
            "앞뒤 청킹 간 연관성과 문맥을 고려하여 자연스럽고 통일성 있는 설명이 되도록 하며,\n"
            "생성된 설명은 의미 기반 임베딩의 컨텍스트로 바로 활용될 예정임을 참고 바랍니다.\n\n"
            "응답 예시:\n"
            "[\n"
            "  [\"설명 텍스트 1\", 시작 시간 1, 종료 시간 1],\n"
            "  [\"설명 텍스트 2\", 시작 시간 2, 종료 시간 2],\n"
            "  ...\n"
            "]\n"
            "\n"
            "질문: {input}\n"
            "문서 내용: {context}"
        ).strip()

    @staticmethod
    def get_viewer_escape_analysis_prompt() -> str:
        return (
            "다음은 유튜브 영상의 시청자 이탈 분석을 위한 컨텍스트입니다.\n\n"
            "[이탈 원인 관련 청킹 데이터]\n"
            "{cause_chunk}\n\n"
            "[이탈 개선 관련 청킹 데이터]\n"
            "{improvement_chunk}\n\n"
            "[예상 편집 흐름 관련 청킹 데이터]\n"
            "{editing_flow_chunk}\n\n"
            "---\n\n"
            "각 청킹은 다음 형식입니다:\n"
            "- content: 해당 구간의 텍스트 (실제 자막 혹은 의미 요약)\n"
            "- source_type: 'mean'이면 의미 기반 요약, 'time'이면 실제 자막\n"
            "- meta: 'time_start', 'time_end'는 구간 정보 (초 단위), 'is_focus_zone'은 집중 분석 구간 여부, 'audienceWatchRatio'는 평균 시청률\n\n"
            "---\n"
            "영상 및 채널 정보:\n"
            "- 영상 제목: {video_title}\n"
            "- 영상 설명: {video_description}\n"
            "- 영상 카테고리: {video_category}\n"
            "- 채널 콘셉트: {channel_concept}\n"
            "- 채널 타겟: {channel_target}\n"
            "- 채널 주요 해시태그: {channel_hashtag}\n\n"
            "---\n"
            "시청 이탈 지표:\n"
            "- 영상 전체 길이: {video_length}초\n"
            "- 시청자 이탈이 가장 심한 시점: {worst_sec}초\n"
            "- 집중 분석 구간: {start_focus_time}초 ~ {end_focus_time}초\n\n"
            "---\n\n"
            "이 정보를 바탕으로 아래 3가지 질문에 대해 정리해 주세요:\n\n"
            "1. 이 영상의 시청 이탈 원인을 설명해 주세요.\n"
            "2. 이 영상의 시청 이탈을 줄이기 위한 개선 방안을 제시해 주세요.\n"
            "3. 이 영상에 적합한 예상 편집 흐름을 제안해 주세요.\n\n"
            "**출력 형식은 반드시 아래 예시를 따르세요:**\n\n"
            "2분 22초(02:06~02:55) 구간 이탈 요약 및 개선안입니다.\n\n"
            "1. 이탈 원인\n"
            "- (항목명): 상세 설명\n"
            "- ...\n\n"
            "2. 개선 방안\n"
            "- (항목명): 구체적 전략 제시\n"
            "- ...\n\n"
            "3. 예상 편집 흐름\n"
            "00:00–02:06: 구간 내용 요약 (예: 인트로, 컨셉 설명 등)\n"
            "02:06–02:22: 핵심 질문 또는 클라이맥스 장면\n"
            "02:22 이후: 다음 회차/내용 예고 혹은 클리프행어 삽입\n\n"
            "꼭 위 구조를 지켜 작성해 주세요."
        ).strip()